We should move this to framework, once it has settled down. For now we'll have
this in omi just because that is where we are doing development. But this code
isn't instrument specific, so it doesn't belong in omi long term.